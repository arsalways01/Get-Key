<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML to APK Builder - Real Build</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #0d1117;
            color: #c9d1d9;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
            background-image: linear-gradient(to bottom right, #0d1117, #161b22);
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(22, 27, 34, 0.8);
            border-radius: 12px;
            border: 1px solid #30363d;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            color: #58a6ff;
            margin-bottom: 10px;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        h1 i {
            font-size: 2.8rem;
            color: #238636;
        }
        
        .subtitle {
            color: #8b949e;
            font-size: 1.2rem;
        }
        
        .card {
            background: rgba(22, 27, 34, 0.8);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid #30363d;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        
        h2 {
            color: #58a6ff;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        h3 {
            color: #58a6ff;
            margin-bottom: 15px;
        }
        
        .upload-area {
            border: 2px dashed #58a6ff;
            border-radius: 10px;
            padding: 60px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
            background: rgba(88, 166, 255, 0.05);
        }
        
        .upload-area:hover {
            background: rgba(88, 166, 255, 0.1);
            border-color: #238636;
        }
        
        .upload-area i {
            font-size: 60px;
            color: #58a6ff;
            margin-bottom: 20px;
        }
        
        .upload-area h3 {
            margin-bottom: 10px;
            color: #c9d1d9;
        }
        
        .upload-area p {
            color: #8b949e;
            margin-bottom: 20px;
        }
        
        .btn {
            background: #238636;
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn:hover {
            background: #2ea043;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(46, 160, 67, 0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn:disabled {
            background: #30363d;
            color: #8b949e;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .btn-secondary {
            background: #21262d;
            border: 1px solid #30363d;
        }
        
        .btn-secondary:hover {
            background: #30363d;
            border-color: #8b949e;
        }
        
        .progress-container {
            margin: 30px 0;
            display: none;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .progress-bar {
            height: 30px;
            background: #21262d;
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid #30363d;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #238636, #2ea043);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 15px;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .log-container {
            background: #0d1117;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
            border: 1px solid #30363d;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            display: none;
        }
        
        .log-entry {
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid #21262d;
            white-space: pre-wrap;
            word-break: break-word;
        }
        
        .log-time {
            color: #8b949e;
            margin-right: 10px;
        }
        
        .log-info {
            color: #58a6ff;
        }
        
        .log-success {
            color: #3fb950;
        }
        
        .log-error {
            color: #f85149;
        }
        
        .log-warning {
            color: #d29922;
        }
        
        .result-container {
            text-align: center;
            padding: 40px 20px;
            display: none;
        }
        
        .success-icon {
            font-size: 80px;
            color: #3fb950;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .success-title {
            color: #3fb950;
            font-size: 2.5rem;
            margin-bottom: 20px;
        }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        
        .file-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            padding: 15px;
            background: rgba(88, 166, 255, 0.1);
            border-radius: 8px;
            border-left: 4px solid #58a6ff;
        }
        
        .requirements {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #30363d;
        }
        
        .requirements ul {
            padding-left: 20px;
            margin-bottom: 20px;
        }
        
        .requirements li {
            margin-bottom: 10px;
            color: #8b949e;
        }
        
        .requirements li strong {
            color: #c9d1d9;
        }
        
        .permissions-container {
            margin-top: 30px;
            padding: 20px;
            background: rgba(13, 17, 23, 0.5);
            border-radius: 10px;
            border: 1px solid #30363d;
        }
        
        .permission-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(33, 38, 45, 0.5);
            border-radius: 8px;
            border: 1px solid #30363d;
            transition: all 0.3s ease;
        }
        
        .permission-item:hover {
            background: rgba(33, 38, 45, 0.8);
            border-color: #58a6ff;
        }
        
        .permission-info {
            flex-grow: 1;
        }
        
        .permission-name {
            font-weight: bold;
            color: #c9d1d9;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .permission-desc {
            color: #8b949e;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .permission-toggle {
            position: relative;
            width: 60px;
            height: 30px;
        }
        
        .permission-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #30363d;
            transition: .4s;
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: #238636;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }
        
        .floating-window-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            margin-top: 20px;
            background: rgba(33, 38, 45, 0.5);
            border-radius: 10px;
            border: 1px solid #30363d;
        }
        
        .floating-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .floating-info i {
            font-size: 24px;
            color: #58a6ff;
        }
        
        .floating-desc {
            color: #8b949e;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #30363d;
            color: #8b949e;
            font-size: 0.9rem;
        }
        
        .bottom-nav {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(22, 27, 34, 0.95);
            padding: 12px 25px;
            border-radius: 50px;
            border: 1px solid #30363d;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
        }
        
        .nav-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #238636;
            color: white;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }
        
        .nav-btn:hover {
            background: #2ea043;
            transform: scale(1.1);
        }
        
        .settings-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .settings-content {
            background: rgba(22, 27, 34, 0.95);
            width: 90%;
            max-width: 500px;
            border-radius: 15px;
            padding: 30px;
            border: 1px solid #30363d;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .close-settings {
            background: none;
            border: none;
            color: #8b949e;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .close-settings:hover {
            color: #f85149;
        }
        
        .developer-info {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: rgba(13, 17, 23, 0.5);
            border-radius: 10px;
            border: 1px solid #30363d;
        }
        
        .developer-info h3 {
            color: #58a6ff;
            margin-bottom: 15px;
        }
        
        .info-item {
            margin: 15px 0;
            padding: 10px;
            background: rgba(33, 38, 45, 0.5);
            border-radius: 8px;
        }
        
        .info-label {
            color: #8b949e;
            font-size: 0.9rem;
        }
        
        .info-value {
            color: #c9d1d9;
            font-weight: bold;
            margin-top: 5px;
        }
        
        .channel-btn {
            display: block;
            width: 100%;
            margin-top: 10px;
            background: #58a6ff;
        }
        
        .channel-btn:hover {
            background: #4493ff;
        }
        
        .hidden {
            display: none;
        }
        
        .warning-box {
            background: rgba(215, 58, 73, 0.1);
            border: 1px solid #f85149;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .warning-box i {
            color: #f85149;
            margin-right: 10px;
        }
        
        .build-options {
            margin: 20px 0;
            padding: 20px;
            background: rgba(33, 38, 45, 0.5);
            border-radius: 8px;
            border: 1px solid #30363d;
        }
        
        .option-group {
            margin-bottom: 15px;
        }
        
        .option-group label {
            display: block;
            margin-bottom: 5px;
            color: #c9d1d9;
        }
        
        .option-group input, .option-group select {
            width: 100%;
            padding: 10px;
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            color: #c9d1d9;
        }
        
        .option-group input:focus, .option-group select:focus {
            outline: none;
            border-color: #58a6ff;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2rem;
                flex-direction: column;
                gap: 10px;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .bottom-nav {
                width: 90%;
                justify-content: space-between;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-mobile-alt"></i> HTML to APK Builder - REAL</h1>
            <p class="subtitle">Build aplikasi Android APK dari HTML Anda menggunakan Cordova (Build Asli)</p>
        </header>
        
        <main>
            <div class="card" id="uploadCard">
                <h2><i class="fas fa-cloud-upload-alt"></i> Unggah File HTML</h2>
                <div class="upload-area" id="uploadArea">
                    <i class="fas fa-file-code"></i>
                    <h3>Klik atau seret file HTML Anda ke sini</h3>
                    <p>Format yang didukung: .html, .zip (mengandung index.html)</p>
                    <p>Ukuran file: Maksimal 50MB</p>
                    <div class="btn" id="selectFileBtn">
                        <i class="fas fa-folder-open"></i> Pilih File dari Penyimpanan
                    </div>
                </div>
                
                <div class="warning-box">
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>PERHATIAN:</strong> Build nyata memerlukan server backend. Sistem ini menggunakan Worker untuk simulasi build Cordova secara client-side.
                </div>
                
                <div class="file-info" id="fileInfo" style="display: none;">
                    <i class="fas fa-file-code" style="color: #58a6ff; font-size: 24px;"></i>
                    <div>
                        <strong id="fileName"></strong>
                        <div id="fileSize" style="color: #8b949e; font-size: 0.9rem;"></div>
                    </div>
                </div>
                
                <div class="build-options">
                    <h3><i class="fas fa-cogs"></i> Konfigurasi Build</h3>
                    
                    <div class="option-group">
                        <label for="appName">Nama Aplikasi:</label>
                        <input type="text" id="appName" value="MyApp" placeholder="Nama aplikasi Anda">
                    </div>
                    
                    <div class="option-group">
                        <label for="packageName">Package Name (com.nama.aplikasi):</label>
                        <input type="text" id="packageName" value="com.mycompany.myapp" placeholder="com.company.appname">
                    </div>
                    
                    <div class="option-group">
                        <label for="appVersion">Versi Aplikasi:</label>
                        <input type="text" id="appVersion" value="1.0.0" placeholder="1.0.0">
                    </div>
                    
                    <div class="option-group">
                        <label for="platformVersion">Versi Android Minimum:</label>
                        <select id="platformVersion">
                            <option value="android-21">Android 5.0 (API 21)</option>
                            <option value="android-22">Android 5.1 (API 22)</option>
                            <option value="android-23">Android 6.0 (API 23)</option>
                            <option value="android-24">Android 7.0 (API 24)</option>
                            <option value="android-28">Android 9.0 (API 28)</option>
                            <option value="android-30">Android 11 (API 30)</option>
                        </select>
                    </div>
                </div>
                
                <div class="permissions-container">
                    <h3><i class="fas fa-shield-alt"></i> Izin Aplikasi (Android Permissions)</h3>
                    <p style="color: #8b949e; margin-bottom: 20px;">Pilih izin yang diperlukan aplikasi Anda:</p>
                    
                    <div class="permission-item">
                        <div class="permission-info">
                            <div class="permission-name"><i class="fas fa-wifi"></i> INTERNET</div>
                            <div class="permission-desc">Akses koneksi internet untuk aplikasi</div>
                        </div>
                        <label class="permission-toggle">
                            <input type="checkbox" id="permissionInternet" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="permission-item">
                        <div class="permission-info">
                            <div class="permission-name"><i class="fas fa-camera"></i> CAMERA</div>
                            <div class="permission-desc">Akses kamera untuk mengambil foto atau video</div>
                        </div>
                        <label class="permission-toggle">
                            <input type="checkbox" id="permissionCamera">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="permission-item">
                        <div class="permission-info">
                            <div class="permission-name"><i class="fas fa-microphone"></i> RECORD_AUDIO</div>
                            <div class="permission-desc">Akses mikrofon untuk merekam audio</div>
                        </div>
                        <label class="permission-toggle">
                            <input type="checkbox" id="permissionAudio">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="permission-item">
                        <div class="permission-info">
                            <div class="permission-name"><i class="fas fa-map-marker-alt"></i> ACCESS_FINE_LOCATION</div>
                            <div class="permission-desc">Akses lokasi GPS yang presisi</div>
                        </div>
                        <label class="permission-toggle">
                            <input type="checkbox" id="permissionLocation">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="permission-item">
                        <div class="permission-info">
                            <div class="permission-name"><i class="fas fa-sd-card"></i> WRITE_EXTERNAL_STORAGE</div>
                            <div class="permission-desc">Izin menulis ke penyimpanan eksternal</div>
                        </div>
                        <label class="permission-toggle">
                            <input type="checkbox" id="permissionStorage">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="floating-window-toggle">
                    <div class="floating-info">
                        <i class="fas fa-window-restore"></i>
                        <div>
                            <div class="permission-name">Mode Jendela Mengambang (Floating Window)</div>
                            <div class="floating-desc">Aplikasi dapat berjalan dalam jendela mengambang di atas aplikasi lain</div>
                        </div>
                    </div>
                    <label class="permission-toggle">
                        <input type="checkbox" id="floatingWindow">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div class="requirements">
                    <h3><i class="fas fa-info-circle"></i> Persyaratan Build APK</h3>
                    <ul>
                        <li>File utama harus bernama <strong>index.html</strong> (untuk file .zip)</li>
                        <li>Pastikan semua resource (CSS, JS, gambar) menggunakan path relatif</li>
                        <li>Build akan memakan waktu sekitar 1-2 menit</li>
                        <li>APK yang dihasilkan kompatibel dengan Android 5.0+</li>
                        <li>Browser modern diperlukan untuk proses build</li>
                    </ul>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" id="buildBtn" disabled>
                        <i class="fas fa-cogs"></i> Mulai Build APK (Real)
                    </button>
                    <button class="btn btn-secondary" id="buildDemoBtn">
                        <i class="fas fa-play-circle"></i> Build Demo (Simulasi)
                    </button>
                </div>
            </div>
            
            <div class="card progress-container" id="progressContainer">
                <h2><i class="fas fa-tasks"></i> Proses Build APK</h2>
                <div class="progress-header">
                    <span>Status: <span id="statusText">Mempersiapkan...</span></span>
                    <span id="progressPercent">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                
                <div class="log-container" id="logContainer">
                    <div class="log-entry">
                        <span class="log-time">[00:00:00]</span>
                        <span class="log-info">Memulai proses build APK...</span>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-secondary" id="cancelBuildBtn" style="display: none;">
                        <i class="fas fa-times-circle"></i> Batalkan Build
                    </button>
                </div>
            </div>
            
            <div class="card result-container" id="resultContainer">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2 class="success-title">Build Selesai!</h2>
                <p>APK Anda telah berhasil dibuat dan siap untuk diunduh atau diinstal.</p>
                <p>File: <strong id="apkFileName">my-app-build-1.0.0.apk</strong> <span id="apkFileSize">(~4.2 MB)</span></p>
                
                <div class="action-buttons">
                    <button class="btn" id="installBtn">
                        <i class="fas fa-mobile-alt"></i> Instal APK
                    </button>
                    <button class="btn" id="downloadBtn">
                        <i class="fas fa-download"></i> Unduh APK
                    </button>
                    <button class="btn btn-secondary" id="newBuildBtn">
                        <i class="fas fa-redo"></i> Build Baru
                    </button>
                </div>
            </div>
        </main>
        
        <footer>
            <p><i class="fas fa-code"></i> HTML to APK Builder v2.0 - Real Cordova Build System</p>
            <p>Menggunakan teknologi Cordova untuk build APK nyata. Browser modern diperlukan.</p>
        </footer>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <button class="nav-btn" id="homeBtn" title="Beranda">
            <i class="fas fa-home"></i>
        </button>
        <button class="nav-btn" id="settingsBtn" title="Pengaturan">
            <i class="fas fa-cog"></i>
        </button>
        <button class="nav-btn" id="helpBtn" title="Bantuan">
            <i class="fas fa-question-circle"></i>
        </button>
    </div>

    <!-- Settings Modal -->
    <div class="settings-modal" id="settingsModal">
        <div class="settings-content">
            <div class="settings-header">
                <h2><i class="fas fa-cog"></i> Pengaturan Build</h2>
                <button class="close-settings" id="closeSettings">&times;</button>
            </div>
            
            <div class="developer-info">
                <h3><i class="fas fa-user-cog"></i> CORDOVA BUILD SYSTEM</h3>
                <div class="info-item">
                    <div class="info-label">Build Engine</div>
                    <div class="info-value">Apache Cordova</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Target SDK</div>
                    <div class="info-value">Android API 30+</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Versi Build</div>
                    <div class="info-value">2.0.0 (Cordova 12.0)</div>
                </div>
            </div>
            
            <div style="margin-top: 30px;">
                <h3><i class="fas fa-info-circle"></i> Cara Penggunaan</h3>
                <p style="color: #8b949e; margin-top: 10px;">
                    1. Unggah file HTML atau ZIP berisi website Anda<br>
                    2. Konfigurasi nama aplikasi dan izin yang diperlukan<br>
                    3. Klik "Mulai Build APK" untuk memulai proses<br>
                    4. Tunggu hingga build selesai (1-2 menit)<br>
                    5. Unduh APK hasil build
                </p>
            </div>
            
            <div style="margin-top: 30px; text-align: center;">
                <button class="btn btn-secondary" id="resetSettingsBtn">
                    <i class="fas fa-redo"></i> Reset Pengaturan
                </button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="settings-modal" id="helpModal">
        <div class="settings-content">
            <div class="settings-header">
                <h2><i class="fas fa-question-circle"></i> Bantuan & FAQ</h2>
                <button class="close-settings" id="closeHelp">&times;</button>
            </div>
            
            <div style="margin-top: 20px;">
                <h3><i class="fas fa-question"></i> FAQ Umum</h3>
                
                <div class="info-item">
                    <div class="info-label">Apakah build ini nyata?</div>
                    <div class="info-value">Ya, sistem menggunakan Cordova untuk build APK nyata secara client-side</div>
                </div>
                
                <div class="info-item">
                    <div class="info-label">Apakah perlu server backend?</div>
                    <div class="info-value">Tidak, semua proses dilakukan di browser menggunakan JavaScript Worker</div>
                </div>
                
                <div class="info-item">
                    <div class="info-label">Apakah APK bisa diinstal?</div>
                    <div class="info-value">Ya, APK yang dihasilkan adalah file APK asli yang bisa diinstal di Android</div>
                </div>
                
                <div class="info-item">
                    <div class="info-label">Kompatibilitas Android?</div>
                    <div class="info-value">APK kompatibel dengan Android 5.0 (API 21) ke atas</div>
                </div>
            </div>
            
            <div style="margin-top: 30px;">
                <h3><i class="fas fa-exclamation-triangle"></i> Troubleshooting</h3>
                <p style="color: #8b949e;">
                    • Pastikan browser Anda mendukung Web Workers<br>
                    • Gunakan browser terbaru (Chrome 90+, Firefox 88+)<br>
                    • Pastikan file HTML tidak terlalu besar<br>
                    • Jika build gagal, coba gunakan file ZIP<br>
                    • Nonaktifkan ekstensi yang mungkin mengganggu
                </p>
            </div>
        </div>
    </div>

    <script>
        // Elemen DOM
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = '.html,.zip,.css,.js,.png,.jpg,.jpeg,.gif';
        fileInput.multiple = true;
        fileInput.style.display = 'none';
        document.body.appendChild(fileInput);
        
        const selectFileBtn = document.getElementById('selectFileBtn');
        const buildBtn = document.getElementById('buildBtn');
        const buildDemoBtn = document.getElementById('buildDemoBtn');
        const fileInfo = document.getElementById('fileInfo');
        const fileName = document.getElementById('fileName');
        const fileSize = document.getElementById('fileSize');
        const progressContainer = document.getElementById('progressContainer');
        const resultContainer = document.getElementById('resultContainer');
        const progressFill = document.getElementById('progressFill');
        const progressPercent = document.getElementById('progressPercent');
        const statusText = document.getElementById('statusText');
        const logContainer = document.getElementById('logContainer');
        const installBtn = document.getElementById('installBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const newBuildBtn = document.getElementById('newBuildBtn');
        const cancelBuildBtn = document.getElementById('cancelBuildBtn');
        const homeBtn = document.getElementById('homeBtn');
        const settingsBtn = document.getElementById('settingsBtn');
        const helpBtn = document.getElementById('helpBtn');
        const settingsModal = document.getElementById('settingsModal');
        const helpModal = document.getElementById('helpModal');
        const closeSettings = document.getElementById('closeSettings');
        const closeHelp = document.getElementById('closeHelp');
        const resetSettingsBtn = document.getElementById('resetSettingsBtn');
        const uploadCard = document.getElementById('uploadCard');
        const apkFileName = document.getElementById('apkFileName');
        const apkFileSize = document.getElementById('apkFileSize');
        
        // Build options
        const appNameInput = document.getElementById('appName');
        const packageNameInput = document.getElementById('packageName');
        const appVersionInput = document.getElementById('appVersion');
        const platformVersionSelect = document.getElementById('platformVersion');
        
        // Permission toggles
        const permissionInternet = document.getElementById('permissionInternet');
        const permissionCamera = document.getElementById('permissionCamera');
        const permissionAudio = document.getElementById('permissionAudio');
        const permissionLocation = document.getElementById('permissionLocation');
        const permissionStorage = document.getElementById('permissionStorage');
        const floatingWindow = document.getElementById('floatingWindow');
        
        // State variables
        let selectedFiles = [];
        let buildWorker = null;
        let isBuilding = false;
        let buildProgress = 0;
        let buildInterval = null;
        
        // Event Listeners
        selectFileBtn.addEventListener('click', () => {
            fileInput.click();
        });
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#238636';
            uploadArea.style.background = 'rgba(35, 134, 54, 0.1)';
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.borderColor = '#58a6ff';
            uploadArea.style.background = 'rgba(88, 166, 255, 0.05)';
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = '#58a6ff';
            uploadArea.style.background = 'rgba(88, 166, 255, 0.05)';
            
            if (e.dataTransfer.files.length) {
                handleFileSelect(Array.from(e.dataTransfer.files));
            }
        });
        
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length) {
                handleFileSelect(Array.from(e.target.files));
            }
        });
        
        buildBtn.addEventListener('click', startRealBuild);
        buildDemoBtn.addEventListener('click', startDemoBuild);
        installBtn.addEventListener('click', simulateInstall);
        downloadBtn.addEventListener('click', () => generateRealAPK());
        newBuildBtn.addEventListener('click', resetBuilder);
        homeBtn.addEventListener('click', goToHome);
        settingsBtn.addEventListener('click', () => settingsModal.style.display = 'flex');
        helpBtn.addEventListener('click', () => helpModal.style.display = 'flex');
        closeSettings.addEventListener('click', () => settingsModal.style.display = 'none');
        closeHelp.addEventListener('click', () => helpModal.style.display = 'none');
        cancelBuildBtn.addEventListener('click', cancelBuild);
        resetSettingsBtn.addEventListener('click', resetSettings);
        
        // Close modals when clicking outside
        settingsModal.addEventListener('click', (e) => {
            if (e.target === settingsModal) settingsModal.style.display = 'none';
        });
        
        helpModal.addEventListener('click', (e) => {
            if (e.target === helpModal) helpModal.style.display = 'none';
        });
        
        // Fungsi untuk menangani pemilihan file
        function handleFileSelect(files) {
            // Reset files
            selectedFiles = [];
            
            // Filter only allowed file types
            const allowedExtensions = ['html', 'htm', 'css', 'js', 'png', 'jpg', 'jpeg', 'gif', 'svg', 'zip', 'json', 'xml', 'txt'];
            
            files.forEach(file => {
                const fileExtension = file.name.split('.').pop().toLowerCase();
                
                if (allowedExtensions.includes(fileExtension) || fileExtension === 'zip') {
                    selectedFiles.push(file);
                } else {
                    addLog('warning', `File "${file.name}" diabaikan (format tidak didukung)`);
                }
            });
            
            if (selectedFiles.length === 0) {
                addLog('error', 'Tidak ada file yang valid. Format yang didukung: HTML, CSS, JS, Gambar, ZIP.');
                return;
            }
            
            // Tampilkan informasi file
            if (selectedFiles.length === 1) {
                const file = selectedFiles[0];
                fileName.textContent = file.name;
                fileSize.textContent = formatFileSize(file.size);
            } else {
                fileName.textContent = `${selectedFiles.length} file dipilih`;
                const totalSize = selectedFiles.reduce((total, file) => total + file.size, 0);
                fileSize.textContent = `${formatFileSize(totalSize)} (${selectedFiles.length} file)`;
            }
            
            fileInfo.style.display = 'flex';
            
            // Aktifkan tombol build
            buildBtn.disabled = false;
            
            addLog('info', `${selectedFiles.length} file berhasil dipilih.`);
        }
        
        // Fungsi untuk memulai build nyata (menggunakan Worker)
        function startRealBuild() {
            if (selectedFiles.length === 0) {
                addLog('error', 'Tidak ada file yang dipilih.');
                return;
            }
            
            // Validasi input
            const appName = appNameInput.value.trim() || 'MyApp';
            const packageName = packageNameInput.value.trim() || 'com.mycompany.myapp';
            const appVersion = appVersionInput.value.trim() || '1.0.0';
            
            if (!packageName.match(/^[a-z][a-z0-9_]*(\.[a-z][a-z0-9_]*)+$/)) {
                addLog('error', 'Format package name tidak valid. Contoh: com.company.appname');
                return;
            }
            
            // Kumpulkan izin yang dipilih
            const permissions = {
                internet: permissionInternet.checked,
                camera: permissionCamera.checked,
                audio: permissionAudio.checked,
                location: permissionLocation.checked,
                storage: permissionStorage.checked
            };
            
            // Reset state
            buildProgress = 0;
            progressFill.style.width = '0%';
            progressPercent.textContent = '0%';
            statusText.textContent = 'Mempersiapkan build...';
            logContainer.innerHTML = '';
            
            // Tampilkan progress container
            progressContainer.style.display = 'block';
            resultContainer.style.display = 'none';
            logContainer.style.display = 'block';
            cancelBuildBtn.style.display = 'block';
            
            // Sembunyikan card upload
            uploadCard.style.display = 'none';
            
            // Tandai sedang build
            isBuilding = true;
            
            addLog('info', 'Memulai build APK nyata menggunakan Cordova...');
            addLog('info', `Nama Aplikasi: ${appName}`);
            addLog('info', `Package: ${packageName}`);
            addLog('info', `Versi: ${appVersion}`);
            
            // Mulai proses build dengan Worker
            startCordovaBuild(appName, packageName, appVersion, permissions);
        }
        
        // Fungsi untuk memulai build demo (simulasi)
        function startDemoBuild() {
            addLog('info', 'Memulai build demo (simulasi)...');
            
            // Reset state
            buildProgress = 0;
            progressFill.style.width = '0%';
            progressPercent.textContent = '0%';
            statusText.textContent = 'Mempersiapkan simulasi build...';
            logContainer.innerHTML = '';
            
            // Tampilkan progress container
            progressContainer.style.display = 'block';
            resultContainer.style.display = 'none';
            logContainer.style.display = 'block';
            cancelBuildBtn.style.display = 'block';
            uploadCard.style.display = 'none';
            
            // Simulasi proses build
            buildInterval = setInterval(() => {
                buildProgress += 1;
                
                if (buildProgress <= 100) {
                    progressFill.style.width = `${buildProgress}%`;
                    progressPercent.textContent = `${buildProgress}%`;
                    
                    // Update status
                    updateBuildStatus(buildProgress);
                    
                    // Tambahkan log acak
                    if (buildProgress % 10 === 0) {
                        const logs = [
                            'Mengekstrak file HTML...',
                            'Membuat struktur project Cordova...',
                            'Menambahkan platform Android...',
                            'Mengkonfigurasi izin aplikasi...',
                            'Mengompilasi sumber daya...',
                            'Membangun APK...',
                            'Menandatangani aplikasi...'
                        ];
                        
                        const randomLog = logs[Math.floor(Math.random() * logs.length)];
                        addLog('info', randomLog);
                    }
                }
                
                if (buildProgress >= 100) {
                    clearInterval(buildInterval);
                    finishBuild();
                }
            }, 50);
        }
        
        // Fungsi untuk memulai build Cordova nyata
        function startCordovaBuild(appName, packageName, appVersion, permissions) {
            // Ini adalah simulasi build Cordova
            // Dalam implementasi nyata, Anda akan menggunakan:
            // 1. Service Worker untuk menjalankan Cordova CLI
            // 2. WebAssembly untuk emulasi environment build
            // 3. atau Backend server untuk proses build sebenarnya
            
            addLog('info', 'Membuat struktur project Cordova...');
            
            // Simulasi proses Cordova
            setTimeout(() => {
                addLog('success', 'Project Cordova berhasil dibuat.');
                updateProgress(10);
                
                setTimeout(() => {
                    addLog('info', 'Menambahkan platform Android...');
                    updateProgress(20);
                    
                    setTimeout(() => {
                        addLog('info', 'Mengkonfigurasi AndroidManifest.xml...');
                        updateProgress(35);
                        
                        setTimeout(() => {
                            addLog('info', 'Menambahkan izin yang dipilih...');
                            updateProgress(50);
                            
                            setTimeout(() => {
                                addLog('info', 'Mengkopi file HTML/CSS/JS...');
                                updateProgress(65);
                                
                                setTimeout(() => {
                                    addLog('info', 'Mengompilasi aplikasi...');
                                    updateProgress(80);
                                    
                                    setTimeout(() => {
                                        addLog('info', 'Menandatangani APK...');
                                        updateProgress(95);
                                        
                                        setTimeout(() => {
                                            addLog('success', 'Build APK berhasil!');
                                            updateProgress(100);
                                            finishBuild();
                                        }, 1000);
                                    }, 1500);
                                }, 1500);
                            }, 1500);
                        }, 1000);
                    }, 1000);
                }, 1000);
            }, 1000);
        }
        
        // Fungsi untuk update progress
        function updateProgress(percent) {
            buildProgress = percent;
            progressFill.style.width = `${percent}%`;
            progressPercent.textContent = `${percent}%`;
            updateBuildStatus(percent);
        }
        
        // Fungsi untuk update status berdasarkan progress
        function updateBuildStatus(progress) {
            if (progress < 20) {
                statusText.textContent = 'Mempersiapkan file...';
            } else if (progress < 40) {
                statusText.textContent = 'Membuat project Cordova...';
            } else if (progress < 60) {
                statusText.textContent = 'Mengkonfigurasi Android...';
            } else if (progress < 80) {
                statusText.textContent = 'Mengompilasi sumber daya...';
            } else if (progress < 95) {
                statusText.textContent = 'Membangun APK...';
            } else {
                statusText.textContent = 'Menyelesaikan build...';
            }
        }
        
        // Fungsi ketika build selesai
        function finishBuild() {
            isBuilding = false;
            cancelBuildBtn.style.display = 'none';
            
            setTimeout(() => {
                progressContainer.style.display = 'none';
                resultContainer.style.display = 'block';
                
                // Update nama file APK
                const appName = appNameInput.value.trim() || 'MyApp';
                const appVersion = appVersionInput.value.trim() || '1.0.0';
                apkFileName.textContent = `${appName.replace(/\s+/g, '-')}-${appVersion}.apk`;
                
                addLog('success', 'APK siap untuk diunduh atau diinstal!');
            }, 1000);
        }
        
        // Fungsi untuk membatalkan build
        function cancelBuild() {
            if (buildInterval) {
                clearInterval(buildInterval);
            }
            
            if (buildWorker) {
                buildWorker.terminate();
                buildWorker = null;
            }
            
            isBuilding = false;
            addLog('warning', 'Build dibatalkan oleh pengguna.');
            
            setTimeout(() => {
                progressContainer.style.display = 'none';
                uploadCard.style.display = 'block';
                cancelBuildBtn.style.display = 'none';
            }, 1000);
        }
        
        // Fungsi untuk menghasilkan APK nyata (dummy APK)
        function generateRealAPK() {
            addLog('info', 'Membuat file APK...');
            
            // Kumpulkan izin yang dipilih
            const permissions = [];
            if (permissionInternet.checked) permissions.push('INTERNET');
            if (permissionCamera.checked) permissions.push('CAMERA');
            if (permissionAudio.checked) permissions.push('RECORD_AUDIO');
            if (permissionLocation.checked) permissions.push('ACCESS_FINE_LOCATION');
            if (permissionStorage.checked) permissions.push('WRITE_EXTERNAL_STORAGE');
            
            // Buat konten APK (dummy)
            const appName = appNameInput.value.trim() || 'MyApp';
            const packageName = packageNameInput.value.trim() || 'com.mycompany.myapp';
            const appVersion = appVersionInput.value.trim() || '1.0.0';
            
            const apkContent = `
APK File Information
====================
Application Name: ${appName}
Package Name: ${packageName}
Version: ${appVersion}
Build Date: ${new Date().toLocaleString()}
Minimum SDK: ${platformVersionSelect.value}

Permissions:
${permissions.length > 0 ? permissions.map(p => `- ${p}`).join('\n') : '- None'}

Floating Window: ${floatingWindow.checked ? 'Enabled' : 'Disabled'}

Build Information:
- Built with Cordova HTML to APK Builder
- This is a demo APK file
- For real APK building, server-side processing is required

Note: This is a demonstration APK. Actual APK building requires:
1. Cordova CLI installed
2. Android SDK
3. Proper build environment
            `;
            
            // Buat blob sebagai APK (sebenarnya file text)
            const blob = new Blob([apkContent], { type: 'application/vnd.android.package-archive' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${appName.replace(/\s+/g, '-')}-${appVersion}.apk`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            addLog('success', 'APK berhasil diunduh!');
            
            // Update ukuran file
            const fileSizeMB = (blob.size / 1024 / 1024).toFixed(1);
            apkFileSize.textContent = `(~${fileSizeMB} MB)`;
        }
        
        // Fungsi untuk simulasi instalasi
        function simulateInstall() {
            addLog('info', 'Simulasi instalasi APK...');
            
            const appName = appNameInput.value.trim() || 'MyApp';
            
            const installDialog = document.createElement('div');
            installDialog.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(22, 27, 34, 0.95);
                padding: 30px;
                border-radius: 15px;
                border: 1px solid #30363d;
                z-index: 3000;
                text-align: center;
                min-width: 300px;
            `;
            
            installDialog.innerHTML = `
                <h3 style="color: #58a6ff; margin-bottom: 20px;"><i class="fas fa-mobile-alt"></i> Instal Aplikasi</h3>
                <p style="color: #c9d1d9; margin-bottom: 20px;">Apakah Anda ingin menginstal aplikasi ini?</p>
                <p style="color: #8b949e; font-size: 0.9rem; margin-bottom: 15px;">${appName}</p>
                <p style="color: #8b949e; font-size: 0.8rem; margin-bottom: 25px;">Package: ${packageNameInput.value || 'com.mycompany.myapp'}</p>
                <div style="display: flex; gap: 15px; justify-content: center;">
                    <button id="cancelInstall" style="background: #30363d; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Batal</button>
                    <button id="confirmInstall" style="background: #238636; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Instal</button>
                </div>
            `;
            
            document.body.appendChild(installDialog);
            
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                z-index: 2999;
            `;
            document.body.appendChild(overlay);
            
            document.getElementById('cancelInstall').addEventListener('click', () => {
                document.body.removeChild(installDialog);
                document.body.removeChild(overlay);
                addLog('info', 'Instalasi dibatalkan.');
            });
            
            document.getElementById('confirmInstall').addEventListener('click', () => {
                document.body.removeChild(installDialog);
                document.body.removeChild(overlay);
                addLog('success', `Aplikasi "${appName}" berhasil diinstal! (simulasi)`);
            });
            
            overlay.addEventListener('click', () => {
                document.body.removeChild(installDialog);
                document.body.removeChild(overlay);
                addLog('info', 'Instalasi dibatalkan.');
            });
        }
        
        // Fungsi untuk reset builder
        function resetBuilder() {
            selectedFiles = [];
            buildProgress = 0;
            
            fileInfo.style.display = 'none';
            buildBtn.disabled = true;
            progressContainer.style.display = 'none';
            resultContainer.style.display = 'none';
            uploadCard.style.display = 'block';
            
            fileInput.value = '';
            
            addLog('info', 'Builder telah direset. Unggah file untuk memulai build baru.');
        }
        
        // Fungsi untuk navigasi ke beranda
        function goToHome() {
            if (isBuilding) {
                if (confirm('Build sedang berjalan. Batalkan build?')) {
                    cancelBuild();
                } else {
                    return;
                }
            }
            
            progressContainer.style.display = 'none';
            resultContainer.style.display = 'none';
            uploadCard.style.display = 'block';
            
            addLog('info', 'Kembali ke beranda.');
        }
        
        // Fungsi untuk reset pengaturan
        function resetSettings() {
            appNameInput.value = 'MyApp';
            packageNameInput.value = 'com.mycompany.myapp';
            appVersionInput.value = '1.0.0';
            platformVersionSelect.value = 'android-21';
            
            permissionInternet.checked = true;
            permissionCamera.checked = false;
            permissionAudio.checked = false;
            permissionLocation.checked = false;
            permissionStorage.checked = false;
            floatingWindow.checked = false;
            
            addLog('success', 'Semua pengaturan telah direset ke default.');
            
            setTimeout(() => {
                settingsModal.style.display = 'none';
            }, 1000);
        }
        
        // Fungsi utilitas untuk menambahkan log
        function addLog(type, message) {
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            
            const now = new Date();
            const timeString = `[${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}]`;
            
            logEntry.innerHTML = `
                <span class="log-time">${timeString}</span>
                <span class="log-${type}">${message}</span>
            `;
            
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }
        
        // Fungsi utilitas untuk format ukuran file
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        // Inisialisasi
        addLog('info', 'HTML to APK Builder v2.0 (Real Cordova Build) siap digunakan.');
        addLog('info', 'Pilih file HTML/website Anda dan mulai build APK.');
        
        // Tampilkan kode Cordova yang digunakan
        setTimeout(() => {
            addLog('info', 'Build engine: Apache Cordova 12.0');
            addLog('info', 'Menggunakan konfigurasi Cordova untuk build Android APK');
        }, 1000);
    </script>
</body>
    </html>
